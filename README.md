# Calendes
Des calendriers comme s'il en pleuvait

# Choix du sujet

Nous utilisons r√©guli√®rement des calendriers pour g√©rer nos emplois du temps, rendez-vous et autres mementos et dates importantes dans notre vie quotidienne. Ce type d'application est utile pour nous car nous permet de ne plus avoir la charge mentale de se souvenir des dates.
Nous pensons que ce sujet est int√©ressant car il concerne un grand nombre d'utilisateurs potentiels que ce soit des entreprises, des professionnels ou des particuliers.
Nous avons notamment l'exemple de l'emploi du temps de l'utt et nous pensons que des am√©liorations plus responsables de l'environnement sont possibles.
- plus pratique que edt.utt
- grande et large (pro et priv√©e) utilisation

# Utilit√© sociale

Dans le monde actuel o√π chaque minute est compt√©, le calendrier est un outil indispensable et n√©cessaire au bon fonctionnement de la soci√©t√©, des entreprises et des personnes. 
Il permet d'am√©liorer la productivit√© et l'organisation √† toutes les √©chelles en g√©rant soi-m√™me son emploi du temps, le partageant avec d'autres personnes ou en cr√©ant des √©venements partag√©s.
Les emplois du temps ne concernent pas uniquement les individus mais aussi les ressources. Ainsi une application efficace permet aussi de faciliter l'utilisation et la gestion des ressources.
Ils ont une telle importance qu'ils unifient les individus et les organisations √† travers le monde sur une donn√©e : le temps.
Ils permettent aux individus de se rappeler de l'anniversaire d'un proche, d'un rendez-vous chez le m√©decin.
Ils permettent aux entreprises de planifier, de donner des deadlines, de g√©rer l'organisation de projet.
- organisation gloable et coordination
- pouvoir se projeter dans l'avenir (s'organiser, planifier des projets, faire des plans d'action)
- unification du temps mondial

# Effets de la num√©risation

La num√©risation a eu un impact important sur les emploi du temps : 
l'impact le plus √©vident est la substitution des agendas papier pour des applications, un agenda se garde d√©sormais √† travers les ann√©es.
Ils n√©cessitent d√©sormais des comptes et sont accessibles depuis n'importe o√π avec un acc√®s √† un internet.
Ce changement a aussi eu pour cons√©quence un plus grande convivialit√©, facilitant le partage ou m√™me la modification d'un √©v√®nement ou d'un emploi du temps.
Comme dans beaucoup de domaines, la num√©risation a aussi apport√© un plus grand contr√¥le, permettant √† chacun de modifier les r√©glages pour adapter son agenda √† ses pr√©f√©rences. D'autres changements sont aussi la rapidit√© d'accessibilit√© et les notifications des agendas modernes qui entraine une certaine ali√©nation de la vie quotidienne √† la technologie

- visibilit√© par plus de monde de son calendrier (partage simplifi√©)
- plus de options/d'information
- marche pour tout le temps
- disponible rapidement
- rappel/notification
- concentration de donn√©es sensibles
- moins d'utilisation de papier
- ali√©nation de la vie quotidienne √† la technologie


# Scenarios

Chargement de la page :
1. Utilisateurs ouvre le site
2. Les √©v√®nement s'affichent imm√©diatement
  
Consulter la page :
1. Utilisateurs ouvre le site
2. Une synth√®se visuelle imm√©diate lui donne une vision claire de son emploi du temps
  
Choisir un √©v√®nement :
1. L'utilisateur rep√®re l'√©v√©nement qui l'int√©resse dans la vue "Semaine actuelle" ou "Semaines prochaines"
2. Il clique sur l'√©v√©nement souhait√©
3. Le module "Cr√©ation/Modification" se met √† jour automatiquement pour afficher tous les param√®tres et les boutons d'action deviennent actifs ("Modifier", "Supprimer")

Mofidier l'√©v√®nement : 

1. Apr√®s avoir s√©lectionn√© l'√©v√©nement (sc√©nario 3), l'utilisateur ajuste les informations qu'il souhaite changer; champs texte, date et r√©currence;

Sauvegarder les modifications :

1. L'utilisateur clique sur le bouton "Sauvegarder" apr√®s avoir effectu√© ses modifications
2. L'√©v√©nement modifi√© appara√Æt imm√©diatement dans les vues "Semaine actuelle" et "Semaines prochaines"

# Impact environnemental des sc√©narios sur les sites actuels

L'EcoIndex d'une page (de A √† G) est calcul√© en fonction du positionnement de cette page parmi les pages mondiales concernant :

- la complexit√© de la page(structure et √©lements),
- le poids des donn√©es transf√©r√©es,
- le nombre de requ√™tes HTTP
  
Nous avons choisi de comparer l'impact des sc√©narios sur divers site d'agenda en ligne : monedt.utt.fr, Google Agenda et Cozi, dont [voici les r√©sultats](EcoIndex.md)
La conclusion est que plus les interfaces sont visuellement complexes, plus leur impact sur l'environnement est n√©gatif.

## Mod√®le √©conomique

| Service | mod√®le √©conomique | Particularit√©
| --- | --- | ---
| google agenda | <ul><li>Produit d'appel </li><li>autre? (opaque)</li></ul> | L'outil s'int√®gre dans un √©cosyst√®me, cet outil permet de renforcer l'emprise de la compagnie sur les utilisateurs 
| zimbra.utt | <ul><li> outil openSource</li><li>Autre? (opaque)</li></ul> | Il y a des co√ªts d'h√©bergements et d'entretiens
| Cozi | <ul><li>Publicit√©s </li><li>abonnement</li></ul> | l'entreprise fait du profit soit par le revenu g√©n√©r√© par les pubs, soit par les revenus des abonn√©es premium
Tab.1 : Mesure de l'EcoIndex moyen de divers services d'agenda

Google Agenda : Le produit est gratuit et ne pr√©sente pas de source de  revenu, il s'agit d'un produit d'appel pour l'ecosyst√®me Google.

zimbra.utt : Encore une fois ce service ne pr√©sente pas de source de revenu car il est n√©cessaire et donc fournit par l'universit√©. L'universit√© est elle financ√© par diff√©rentes sources comme les inscriptions ou les subventions publiques

cozi : C'est le produit d'une entreprise. C'est un produit freemium, c'est-√†-dire qu'il est utilisable gratuitement mais poss√®de une version premium payante. En cas d'utilisation gratuite, l'entreprise vend de la publicit√©.

Les agendas sont un produit simple, Les utilisateurs attendent donc qu'ils soient gratuits et grandement accessibles. Pour ces raisons, on constate diff√©rents mod√®les :

- un acc√®s gratuit avec un outil inclus dans un √©cosyst√®me
- un acc√®s Freemium avec des publicit√©s ou un abonnement payant

On peut trouver une grande quantit√© d'agenda √©lectronique, c'est donc un secteur tr√®s concurrentiel. Ce secteur est cependant domin√© par un petit nombre de grands acteurs qui incluent l'agenda dans un ecosyst√®me d'outils.
Les plus petits acteurs doivent donc trouver un moyen de se diff√©rencier. Pour ce faire, il peuvent cibler un public sp√©cifique, d√©velopper des fonctionnalit√©s sp√©cifiques et essayer de s'int√©grer √† l'utilisation des outils plus populaires. Cozi, par exemple, cible en particulier les familles, ils ont pour cela d√©velopper des fonctionnalit√©s cibl√©es comme des listes de courses ou de recttes. Ils ont aussi permis d'int√©grer leur agendas √† d'autres applications avec le format ical. De cette mani√®re, ils n'essayent pas forc√©ment de concurrencer google agenda mais se permettent aussi de s'int√©grer √† cet outil.

Nous pensons que simplement rajouter un outil √† la liste existante serait contradictoire avec l'objectif de r√©duire l'impact √©cologique. Notre objectif sera donc de proposer des am√©liorations aux services d√©j√† existants.

# Structure de l'application et des donn√©es

## Structure des donn√©es 

Pour notre application, nous avons pour l'instant identifi√© trois ressources : les comptes, les agendas et les √©v√®nements.
Les comptes sont li√©s √† l'utilisateur, ils permettent de l'identifier et d'acceder ses donn√©es. Ils sont li√©s √† un seul agendas. ils auront une http-URI avec pour chemin /{compte_id}
Les agendas sont li√©s √† un compte, il s'agit d'une liste d'√©v√®nements. ils auront une http-URI avec pour chemin /{compte_id}/agenda
Les √©v√®nements sont li√©s √† un agenda, il se composent d'attributs comme date.heure de d√©but et de fin, titre, description, r√©currence. Ils auront une http-URI avec pour chemin /{compte_id}/agenda/nom_evenement_{num}

## Maquette de l'interface

Au vu des diff√©rents services compar√©s, des exigences environnementales exprim√©es plus haut et des sc√©narios retenus, nous avons d√©fini pour notre prototype une maquette de l'interface :

<img width="831" height="481" alt="calendes drawio" src="https://github.com/user-attachments/assets/0968b6d7-ed61-4578-af3a-0df45ecf9006" />
Fig.1: Maquette de l'inerface

L'interface est divis√©e en trois parties distinctes:
- "Semaine actuelle" est une visualisation des √©v√©nements de la semaine actuelle. Ces √©v√©nements sont affich√©s sur la plage horaire o√π ils ont lieu, avec leur titre. Les √©v√©nements avec un fond plein sont des √©v√©nements dit "r√©currents", ils se r√©p√®tent tous les x unit√© de temps. Au contraire, les √©v√©nements √©ph√©m√®res de la semaine sont pr√©sent√©s avec sans fond, qu'avec un contour.
- "Semaines prochaines" est une liste d'√©v√©nements ponctuels qui arrivent dans les semaines qui suivent. Ces √©v√©nements sont pr√©sent√©s sous forme d'une liste d√©roulante dans l'ordre chronologique.
- "Cr√©ation/Modification" est l'outil principal. Sans s√©lection d'un √©v√©nement d√©j√† pr√©sent, il permet d'en cr√©er un avec un titre, une date et heures, une r√©currence s'il y en a une, un lieu et des informations connexes √©crites. Si un √©v√©nement est s√©lectionn√©, il permet de visualiser les d√©tails de cet √©v√©nement et de pouvoir les modifier.


## Premier prototype

Pour notre premi√®re version, nous avons d√©cid√© d'√©crire l'int√©gralit√© du code en HTML pur pour bien structurer la page vis-√†-vis de la maquette. Pour cette premi√®re version du prototype l'√©chantillon de donn√©es est charg√© √†l'int√©reur du  code de mani√®re statique et les fonctionnalit√©s impl√©ment√©es ne sont que celles n√©cessaires pour suivre le sc√©nario prioritaire (Consulter la page).

<img width="831" height="481" alt="calendes premier prototype" src="https://github.com/user-attachments/assets/86bb4f3e-3e17-4da8-8862-14d1a81c63e4" />


Fig.2 : Prototype de la page principale

Ce premier site a pos√© plusieurs probl√®mes. Le premier, qui a √©t√© r√©gl√© dans la partie d'apr√®s, est la non-int√©ractivit√© du site : les ajouts/modifications/suppressions d'√©v√®nements ne se sont pas ; le tableau n'est pas responsive par rapport aux bo√Ætes d'√©v√®nement. Le second probl√®me principal est le fait que les √©v√®nements ne peuvent se mettre que par plage de 2h (les √©v√®nements de 10h05, 10h50, 11h12 et 11h52 sont tous dans la bo√Æte 10h-12h). Il a √©t√© d√©cid√©, pour palier √† ce probl√®me, d'ordoner chronologiquement les √©v√®nements au sein de la bo√Æte dans la suite.


## Second prototype / Passage au React

Apr√®s avoir fait notre premier prototype, nous avions deux choix : passer par une biblioth√®que avec notre code actuel ou passer maintenant en React. Nous avons d√©cid√© de recommencer le code avec du React. Ce changement nous a permis plus efficacement de trier et mettre les donn√©es dans les tableaux. 
Cependant, certaines choses sont rest√© comme par exemple la mise en page, les couleurs et notre id√©e de minimalisme (pas de photographies, des donn√©es affich√©es minimales et une interface √©pur√©e).

Avec le prototype actuel, il est possible d'obtenir une premi√®re estimation de l'impact √©cologique du frontend. Certes, le chargement dynamique des donn√©es n'est pas encore pr√©sent, mais nous avons d√©j√† la possibilit√© d'√©valuer l'effet de l'affichage des donn√©es et du framework. Cette analyse de l'impact (cf. Tab.3) est d√©j√† prometteuse en mode "d√©veloppement", mais surtout en mode "pr√©-production". Nous √©valuons ici l'impact b√©n√©fique de l'utilisation d'outils de d√©veloppement Web comprenant la ["minification"](https://fr.wikipedia.org/wiki/Minification) (voir Wikip√©dia) du code d'une part, et la combinaison du code et des feuilles de style d'autre part.

| |EcoIndex|GES (gCO2e)|Taille du DOM|Requ√™tes|Taille de la page (ko)|
|---|---|---|---|---|---|
|Mode "pr√©-production"|80 A üü¢ |1.39|212|5|1379|
|Mode "d√©veloppement"|76 B üü¢ |1.47|170|18|2485|

Tab.2 Mesure de l'EcoIndex moyen de notre prototype, dans le cadre du sc√©nario principal

## Passage √† l'√©chelle

Nous pouvons maintenant observer ce que le passage √† l'√©chelle aura comme impact sur l'application.

Dans notre cas, ce passage √† l'√©chelle passera par une augmentation du nombre d'√©v√®nement. En effet, apr√®s une utilisation continue, l'utilisateur aura mis tous ses √©v√©nements et les √©v√©nements pass√©s seront toujours enregistr√© dans les donn√©es. Cela aura pour cons√©quence d'augmenter lin√©airement le volume de donn√©es et aura une influence n√©gative sur l'impact √©cologique de notre site.
Nous estimons que cette augmentation sera en effet lin√©aire. En effet, nous consid√©rons que chaque semaine correspond √† un nombre √† peu pr√®s fixe de nouveaux √©v√®nements.

Nous voulons donc, afin d'observer cette tendance, automatiser l'√©valuation de notre site par l'outil EcoIndex :

### √âvolution de l'EcoIndex lors du passage √† l'√©chelle

Nous pouvons r√©colter et consulter les mesures n√©cessaires √† la production de l'EcoIndex, [avant](https://github.com/UTT-GL03/Calendes/actions/runs/19237856405) et [apr√®s](https://github.com/UTT-GL03/Calendes/actions/runs/19238831912).

|   | EcoIndex| GES (gCO2e) | Taille du DOM | Requ√™tes | Taille de la page (ko)
|---|--------:|------------:|--------------:|---------:|---------------------:
| 1. Chargement de la page			 | 83 A üü¢ <br/> 44 D üü° | 1.34<br/>2.12  | 176 <br/> 2843 | 3       | 207.31<br/> 207.31
| 2. Consulter la page 	             | 83 A üü¢ <br/> 39 D üü° | 1.34<br/>2.22  | 176 <br/> 2843 | 5       | 214.819<br/> 1143.014
| 3. Choisir un √©v√®nement			 | 83 A üü¢ <br/> 39 D üü° | 1.34<br/>2.22  | 178 <br/> 2845 | 5       | 214.819<br/> 1143.014
| 4. Modifier l'√©v√®nement            | 83 A üü¢ <br/> 39 D üü° | 1.34<br/>2.22  | 178 <br/> 2845 | 5       | 214.819<br/> 1143.014
| 5. Sauvegarder les modifications   | 83 A üü¢ <br/> 39 D üü° | 1.34<br/>2.22  | 176 <br/> 2843 | 5       | 214.819<br/> 1143.014

Tab.3 : Tableau de l'√©volution de l'√©coindx apr√®s le passage √† l'√©chelle

Le passage √† l'√©chelle montre bien l'augmentation du DOM de la page passant de 176 √† 2 843 ainsi que le poids de la page passant de 215 Ko √† 1 143 Ko √† l'ouverture.

### Mesure de la consommation √©nerg√©tique li√©e √† la consultation

#### Premi√®re mesure avec couchDB

MEASUREMENTS
|  (index)                 | cpu (s)    | √©cran (s) | temps total (s)  | memoire (Bits)   | disk (Bits) | r√©seau (Bits) |
|--------------------------:|-----------:|-----------:|--------------:|----------:|---------:|------------:|
| greenframe-runner         | 0.0602   | 16.9     | 18.1        | 1.22e+8 | 0.00   | 2.27e+5   |
| calendes-static_hosting-1 | 0.000193 | 0.00     | 17.7        | 5.52e+6 | 0.00   | 2.27e+5   |
| calendes-backend-1        | 0.0391   | 0.00     | 17.7        | 1.02e+8 | 0.00   | 25.0      |

ESTIMATES
| (index)                   | cpu (Wh)    | m√©moire (Wh)    | disk (Wh) | r√©seau (Wh) | √©cran (Wh) | total (Wh) |
|--------------------------:|------------:|------------:|----------:|-------------:|------------:|-----------:|
| greenframe-runner         | 0.00075   | 0.000045  | 0.0     | 0.0012     | 0.066     | 0.068    |
| calendes-static_hosting-1 | 0.0000034 | 0.0000028 | 0.0     | 0.0012     | 0.0       | 0.0012   |
| calendes-backend-1        | 0.00068   | 0.000051  | 0.0     | 1.3e-7     | 0.0       | 0.00074  |

Tab.4: mesure et estimations de la consommation √©nerg√©tique apr√®s l'impl√©mentation de couchDB

L'empreinte estim√©e est de 30.813 mg eq. co2 ¬± 1.9% (69.713 mWh).

Cette premi√®re mesure de la consommation a √©t√© faite apr√®s l'impl√©mentation de la base de donn√©e √† distance avec couchDB.


#### Mesure sur notre application compl√®tement fonctionnelle 

MEASUREMENTS
| (index)                   | cpu (s)    | √©cran (s) | temps total (s) | m√©moire (B)   | disk (B) | r√©seau (B) |
|--------------------------:|------------:|------------:|----------:|-------------:|------------:|-----------:|
| greenframe-runner         | 0.194    | 17.7     | 19.1        | 1.41e+8 | 0.00   | 1.62e+6   |
| calendes-static_hosting-1 | 0.000176 | 0.00     | 18.8        | 5.57e+6 | 0.00   | 2.28e+5   |
| calendes-backend-1        | 0.137    | 0.00     | 18.8        | 9.84e+7 | 0.00   | 1.39e+6   |

ESTIMATES
| (index)                   | cpu (Wh)    | m√©moire (Wh)    | disk (Wh) | r√©seau (Wh) | √©cran (Wh) | total (Wh) |
|--------------------------:|------------:|------------:|----------:|-------------:|------------:|-----------:|
| greenframe-runner         | 0.0024    | 0.000054  | 0.0     | 0.0083     | 0.069     | 0.080    |
| calendes-static_hosting-1 | 0.0000031 | 0.0000030 | 0.0     | 0.0012     | 0.0       | 0.0012   |
| calendes-backend-1        | 0.0024    | 0.000052  | 0.0     | 0.0071     | 0.0       | 0.0096   |

Tab.5: mesure et estimations de la consommation √©nerg√©tique sur application v1.0.0

L'empreinte estim√©e est de 39.994 mg eq. co2 ¬± 0.6% (90.485 mWh).

#### Mesure apr√®s multiplication des donn√©es par 10

MEASUREMENTS
| (index)                   | cpu (s)    | √©cran (s) | temps total (s) | m√©moire (B)   | disk (B) | r√©seau (B) |
|--------------------------:|------------:|------------:|----------:|-------------:|------------:|-----------:|
| greenframe-runner         | 1.25     | 20.8     | 22.1        | 1.78e+8 | 0.00   | 1.56e+7   |
| calendes-static_hosting-1 | 0.000196 | 0.00     | 21.8        | 5.54e+6 | 0.00   | 2.28e+5   |
| calendes-backend-1        | 1.05     | 0.00     | 21.8        | 1.54e+8 | 0.00   | 1.54e+7   |

ESTIMATES

| (index)                   | cpu (Wh)    | m√©moire (Wh)    | disk (Wh) | r√©seau (Wh) | √©cran (Wh) | total (Wh) |
|--------------------------:|------------:|------------:|----------:|-------------:|------------:|-----------:|
| greenframe-runner         | 0.016     | 0.000079  | 0.0     | 0.080      | 0.081     | 0.18     |
| calendes-static_hosting-1 | 0.0000034 | 0.0000034 | 0.0     | 0.0012     | 0.0       | 0.0012   |
| calendes-backend-1        | 0.018     | 0.000095  | 0.0     | 0.079      | 0.0       | 0.097    |

Tab.6: mesure et estimations de la consommation √©nerg√©tique avec 10 foix plus de donn√©es

L'empreinte estim√©e est de 121.64 mg eq. co2 ¬± 0.1% (275.203 mWh).


#### Mesure apr√®s tri chronologique des √©v√©nements

MEASUREMENTS
| (index)                   | cpu (s)    | screen (s) | totalTime (s) | mem (B)   | disk (B) | network (B) |
|--------------------------:|------------:|------------:|----------:|-------------:|------------:|-----------:|
| greenframe-runner         | 1.49     | 20.9     | 22.1        | 1.78e+8 | 0.00   | 1.57e+7   |
| calendes-static_hosting-1 | 0.000193 | 0.00     | 21.8        | 5.54e+6 | 0.00   | 2.29e+5   |
| calendes-backend-1        | 1.10     | 0.00     | 21.8        | 1.54e+8 | 0.00   | 1.55e+7   |

ESTIMATES

| (index)                   | cpu (Wh)    | mem (Wh)    | disk (Wh) | network (Wh) | screen (Wh) | total (Wh) |
|--------------------------:|------------:|------------:|----------:|-------------:|------------:|-----------:|
| greenframe-runner         | 0.019     | 0.000079  | 0.0     | 0.080      | 0.081     | 0.18     |
| calendes-static_hosting-1 | 0.0000034 | 0.0000034 | 0.0     | 0.0012     | 0.0       | 0.0012   |
| calendes-backend-1        | 0.019     | 0.000095  | 0.0     | 0.079      | 0.0       | 0.099    |

Tab.7: mesure et estimations de la consommation √©nerg√©tique avec tri chronologique des donn√©es

L'empreinte estim√©e est de 123.824 mg eq. co2 ¬± 0.3% (280.144 mWh).


## Bilan et Perspectives

Lors de ce cours, nous avons utilis√© GreenFrame et GreenIT. Nous avons beaucoup appris et cela nous a notamment permis d'en venir √† plusieurs r√©alisations qui nous ont √©tonn√©.
Tout d'abord, nous avons √©t√© surpris par les diff√©rences des mesures entres les deux outils. Sur la derni√®re version de notre application, GreenFrame estime l'empreinte de notre application √† 0.124 gC02eq alors que GreenIT l'estime √† 1,7 gC02eq. Cette diff√©rence peut notamment s'expliquer par la difficult√© √† √©voluer l'impact √©cologique r√©el d'une appilcation web mais il s'explique avant tout par les diff√©rences dans la mani√®re de mesurer des deux outils. GreenFrame √©value l'impact de la consultation seulement alors que GreenIt a une √©valuation plus globale.
Nous avons aussi √©t√© surpris par l'impact √©cologique des infrastucture notamment pr√©sent√© lors de la fresque du num√©rique o√π bien que nous savions que la cr√©ation des appareils avait un impact nous ne pensions pas qu'il √©tait aussi important.







